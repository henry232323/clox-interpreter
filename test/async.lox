fun function2(x) {
    yield 16384;
    println(x);
    yield 342;

    if (x == 1214) {
        spawn(function2, 24480);
    }
}

fun finish() {
    var x = "First print";
    var r = yield nil;

    println("resumed with ", r);
    spawn(function2, 343);
    spawn(function2, 686);
    spawn(function2, 969);
    spawn(function2, 1214);
    return " ok!";
}

yield;

var gen = finish();
println("Function returned", gen);
